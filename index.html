<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Personal Portfolio</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="work-in-progress-bar">
    ONGOING UPDATES
  </header>
  <main>
    <section class="project-tiles">
	<div class="tile" id="tile1">
        <img src="images/trace.webp" alt="Discord Bot">
        <p class="project-title">Trace</p>
        <div class="stacks">
          <img src="images/logos/discordpy.webp" alt="Discordpy"> discord.py<br>
		  <img src="images/logos/aws.webp" alt="AWS"> AWS<br>
          <img src="images/logos/sqlite.webp" alt="üíæ"/> SQLite
        </div>
      </div>
	  <div class="tile" id="tile2">
        <img src="images/q_values.webp" alt="Machine Learning">
        <div class="detailed-description hidden">
			<div class="dpanel">
			  <h2 class="detail-title">Machine Learning</h2>
			  <p class="detail-subtitle">Lightweight Q-learning.</p>

			  <div class="detail-rule"></div>
			  
			  <p class="detail-lead">
				Lightweight Q-learning
			  </p>

			  <div class="detail-tags">
				<span class="tag">SikuliX</span>
				<span class="tag">Python</span>
				<span class="tag">JSON</span>
			  </div>
			  
			  <div class="highlight-card">
				<h3>Highlights</h3>
				<ul>
				  <li>SikuliX image &amp; pattern recognition with tight search regions for speed.</li>
				  <li>Full keyboard-driven automation with human-like random delays.</li>
				  <li>Basic Strategy baseline + Hi-Lo counting and EV-aware bet sizing.</li>
				  <li>Dealer-first detection to infer player count in real time.</li>
				  <li>Safeguards: bankroll tracking, reshuffle detection, conservative progression.</li>
				  <li>Online Q-learning layer that improves during play and stores knowledge in JSON.</li>
				</ul>
			  </div>

			  <p>I didn‚Äôt initially intend for this to be a project, how most of them start.</p>

			  <p>One night, my friends and I were drawn back by nostalgia to Garry‚Äôs Mod into an old gamemode, a sandbox with a player-driven economy, that now included a casino my friends had tested as a decent moneymaker.<br>
			  <i>The only gambling I do with real money is in the stock market.</i> While playing blackjack, I noticed the cards weren‚Äôt just displayed in the 3D worldspace; they were also mirrored in the top-right corner of the UI. The cards appeared in the same spot every round.</p>
		
			<figure class="focus-img">
			  <img class="base" src="images/table.webp" alt="card table">

			  <!-- the two sharp cutouts -->
			  <img class="clear c1" src="images/table.webp" alt="" aria-hidden="true">
			  <img class="clear c2" src="images/table.webp" alt="" aria-hidden="true">

			  <!-- visual rings + labels -->
			  <span class="ring r1"></span><span class="label l1">3D worldspace</span>
			  <span class="ring r2"></span><span class="label l2">2D UI</span>
			</figure>

			  <p>Before my friends even joked that we could automate it I had already opened Sikuli, a little known but powerful and versatile program originally developed at MIT‚Äôs Computer Science & Artificial Intelligence Laboratory.</p>

			  <p>Consistency meant I could rely on image and pattern recognition. Unlike most video games with a free-look camera, tracking objects is not trivial, but this was served to me on a platter.</p>

			  <p>The first step is always defining regions on the screen, in this case the placement of the cards.</p>
			  
			  <figure class="media">
				<!-- replace src with your screenshot -->
				<img src="" alt="picture of card region">
				<figcaption><em>a trick I learned early on to improve optimization: search a smaller area of the screen rather than the entire screen</em></figcaption>
				</figure>

			  <p>The next step was to identify every card. I figured I‚Äôd start simple with OCR (optical character recognition), but I realized it wasn‚Äôt really viable for scalability (detecting suit or color). Dreading the alternative, I hoped maybe the creator was lazy and ripped an existing card image pack from somewhere on the internet, but I found nothing.</p>
				
				<p>Which meant that I would have to play enough rounds to manually take a picture of every. single. 52. cards. Ugh. So I wrote a script to do it automatically.</p>
				
			  <figure>
			  <div style="
				display:grid;
				grid-template-columns: 1fr auto 1fr;  /* left image | arrow | right image */
				align-items:center;
				width:100%;
			  ">
				<!-- LEFT image (anchored to arrow) -->
				<img
				  src="file:///C:/Users/Johnnie/Documents/GitHub/JohnMarman.github.io/images/cardfolderv1.webp"
				  alt="full card set folder"
				  style="
					justify-self:end;               /* hug the arrow */
					margin-right:5px;               /* 5px from arrow */
					border-radius:8px; background:#fff;
					box-shadow:0 12px 26px rgba(0,0,0,.35);
				  "
				/>

				<!-- ARROW in the middle -->
				<div aria-hidden="true" style="
				  grid-column:2;
				  font-size:clamp(36px, 7vw, 72px);
				  line-height:1; color:#fff;
				  text-shadow:0 0 2px rgba(0,0,0,.45), 0 2px 10px rgba(0,0,0,.55);
				  transform: translateY(-6%);
				">‚ûú</div>

				<!-- RIGHT image (anchored to arrow) -->
				<img
				  src="file:///C:/Users/Johnnie/Documents/GitHub/JohnMarman.github.io/images/cardfolderv2.webp"
				  alt="reduced search set"
				  style="
					justify-self:start;             /* hug the arrow */
					margin-left:5px;                /* 5px from arrow */
					border-radius:8px; background:#fff;
					box-shadow:0 12px 26px rgba(0,0,0,.35);
				  "
				/>
			  </div>

			  <figcaption style="
				margin:12px auto 0; max-width:980px;
				text-align:center; font-style:italic; color:#000;
				font-size:clamp(13px,1.05rem,18px); line-height:1.45;
			  ">
				another trick i learned to improve optimization was to search for suit and value separately.<br>
				(in hindsight I could maybe optimize it even further by desaturating the colors to reduce the number of files to iterate through,
				although that might reduce matching certainty)
			  </figcaption>
			</figure>


			  <p>As if the consistent card placement weren‚Äôt convenient enough, the game also accepted keyboard inputs, so I could automate the entire game without moving the mouse: starting a new round, placing bets, hit/hold/double, and starting the next round. (Learning from experience and making sure to implement random pauses to throw off simple autokey bot detectors.)</p>
				
				<div style="display: flex;align-items: center;gap: 1rem;margin: 1rem 0;">
				<img src="images/basicstrategy.webp"
					alt="Blackjack basic strategy"
					style="width:50%; min-width: 50%; height:auto; float:left; margin-right:clamp(8px,2vw,16px);margin-bottom:clamp(8px,2vw,16px);">
					<div>
						<p style="text-align: center;font-size: clamp(14px, 1.3vw, 18px);color: #111;  padding: .2rem .5rem;  border-radius: 6px;  display: inline-block;">I implemented the Basic Strategy Chart logic, and done!</p>
						<p style="text-align:center; margin-top: .5rem;  font-size: clamp(18px, 2.2vw, 28px);  font-weight: 700;">Almost too easy, right?</p>
					</div>
				</div>

			  <p>Lulled into a false sense of security. Ironic, because it happens every single time. Through multiple projects I‚Äôve become well acquainted with edge cases.</p>

			  <p>As I was rewarding myself with a coffee, basking in the accomplishment of my ‚Äúcompleted‚Äù project, I came back to the computer and noticed other players had joined the blackjack table. No big deal, until I realized my cards weren‚Äôt in the same position on the screen anymore. Like the smirk sliding off my face, my cards slid further down the screen as more players joined. The dealer‚Äôs cards were still at the top, but other players‚Äô hands now slotted between mine and the dealer‚Äôs.</p>

			  <p>I couldn‚Äôt just leave every time someone else joined or only play at empty tables, that would raise alarm bells. Back to the drawing board.</p>

			  <p>But I also realized the potential: more players = a larger sample set üí° I could count cards.</p>

			  <p>At this point it was too late for me. I was down the rabbit hole of advanced blackjack strategy, I could improve the bot tenfold. But before I could queue up Rain Man on Netflix, I had to solve the roadblock: the bot didn‚Äôt know how many players were seated at the table. Without that, this project wasn‚Äôt viable. And I wasn‚Äôt about to give up here; there was so much more this project could offer.</p>

			  <p>After analyzing multiple games, drinking too much coffee, walk breaks, racking my brain for a solution, I finally caught something. My cards were dealt first. So after the input to begin the round, I had the bot analyze every possible card region several times per second. Depending on which region detected cards first, I could deduce how many players were at the table.</p>

			  <p>I implemented Hi-Lo, running count, true count, betting adjustments. I also added safeguards that tracked bankroll (money spent and gained) in case the bot went rogue and tried to bet all of my money, and I used conservative betting that increased only when the expected value (EV) was positive.</p>
				
				<figure class="media">
				<!-- your chart image -->
				<img src="" alt="picture of console">
				<figcaption><em>probably no caption</em></figcaption>
			  </figure>
				
			  <p>But the problem was the same throughout: I was relying on observational data when I needed experimental data, specifically how many decks the game was programmed to use. There could be an infinite number of cards, or the deck could be reshuffled every hand, which would make the application of advanced blackjack strategy difficult, if not impossible. I tried frequency analysis twice, letting the bot play afew hundred rounds each time, and got results of 5.94 and 6.69 decks. That made me somewhat confident that the game used a limited number of decks, but I added additional safeguards anyway, just in case:<br>
				-if the running count changed significantly (trying to detect reshuffles), reset the estimated decks<br>
				-only increase minimum bet after a 50 round threshold to avoid early, misleading data<br>
				-in case there were anti-card counting techniques, I implemented a custom streak counter; if I‚Äôd won too many rounds in a row and the variables hadn‚Äôt changed much, I dialed back betting amounts<br>
				-Law of truly large numbers: if a particular event has not been observed within fewer than n independent trials, once the number of trials exceeds n, assume that the event has occurred at least once. For example, if a dealer is using 6 decks and we've seen each unique card in a deck 6 times, we should assume the deck has been reshuffled at least once</p>

			  <p>Research suggested that running millions of simulations could determine the exact mechanics of the game, but since each round took ~10 seconds (even after rewriting/optimizing the code afew times), it wasn‚Äôt viable. The program would need to make real-time decisions based on real-time and historical data and improve itself.</p>

			  <p>It would have to learn.<br>
				üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°üí°<br>
				Cool.</p>
				
				<p>I‚Äôve always wanted a practical excuse to experiment with machine learning, a slightly daunting task. What have I gotten myself into? But on one of my very first searches, like a hand extending from the heavens, I stumbled across a 2019 Stanford research paper that was almost identical to my use case with the same rule set. And as a cherry on top, their findings concluded that running simulations for each decision ‚Äúhas little influence on the current state due to the fact that at the end of each Blackjack game, the true state of the game is revealed‚Äù. It uses Monte Carlo Tree Search for each decision, using ‚Äúaction pairs‚Äù to build a real-time prediction model, which I adapted to build historical data.</p>
				
				<p>But I had to be careful about the size of the dataset. The number of combinations exponentially increases, so I had to set constraints:<br>
				(Player Hand Values)√ó(Dealer Upcard Values)√ó(True Count Values)<br>
				18√ó10√ó21=3,780 total combinations<br>
				18√ó10√ó21√ó21 (running count)=79,380 total combinations<br>
				18√ó10√ó21√ó21√ó100 (betting range)=7,938,000 total combinations</p>
				
				<p>It was almost too good, not in that sense, it was as if it was getting ahead of itself. It was confident in making a decision before it had enough data to justify it. It needed to build a complete dataset before it started to improve itself. Thankfully, the paper briefly touches on ‚Äúexploration vs exploitation‚Äù, which set me on the right path. I implemented an epsilon-greedy strategy that favors exploration early (focusing on populating the dataset and making decisions based on hardcoded strategy) in the learning process but gradually shifts towards exploitation (making decisions based on learned experience) as more episodes are played. This means that over time, the historical data will increasingly influence the action decisions, guiding the script toward better strategies based on past experiences.</p>
				
				<figure class="media">
				<!-- your chart image -->
				<img src="" alt="picture of logic chart">
				<figcaption><em>probably no caption</em></figcaption>
			  </figure>
				
				<p>Overall, this turned out to be a great project. Every roadblock opened a door to an opportunity to learn something new.</p>
				
				
			  <div class="detail-rule"></div>
			</div>

        </div>
        <p class="project-title">Machine Learning</p>
        <div class="stacks">
			<img src="images/logos/json.webp" alt="üìó"> JSON<br>
          <img src="images/logos/sikulix.webp" alt="üìó"> SikuliX<br>
          <img src="images/logos/python.webp" alt="üêç"> Python
        </div>
      </div>
      <div class="tile" id="tile3">
        <img src="images/automatedschedule.webp" alt="Automated Schedule">
        <div class="detailed-description hidden">
          <p>Placeholder slop: Started in 2015 when I was working at The Source, the 'Automated Schedule' was first built to keep track of my constantly changing scheduled hours. It quickly became more than just a schedule tracker as I incorporated features to monitor my earnings and commission. Over the years, it has turned into an essential tool for budgeting and tax referencing.</p>
          <p>The need to manually update the system each week reminded me of the scripting capabilities in Microsoft Excel. Having some background in simple macros, I searched for a similar solution in Google Sheets. This exploration led me to Google Apps Script, a perfect fit since it's based on JavaScript, which I had experience with. Automating the extension of columns, formulas, and color coding led to features like displaying holidays, tracking actual worked hours against the schedule to calculate overtime and discrepancies, and breaking down taxes (for each pay period and total).</p>
          <p>Today, this tool not only displays holidays and manages color coding but also provides a detailed breakdown of taxes and total hours worked each month, helping me keep a precise record of my financials. I continue to use this system almost a decade later, proving its enduring utility and effectiveness."</p>
        </div>
        <p class="project-title">Automated Schedule</p>
        <div class="stacks">
          <img src="images/logos/googlesheets.webp" alt="üìó"> Google Sheets<br>
          <img src="images/logos/javascript.webp" alt="üáØüá∏"> JavaScript
        </div>
      </div>
	  <div class="typewriter hidden">
          <h1 id="weather-info">"Goodmorning sir. The current weather is cloudy, 23 degrees."</h1>
        </div>
      <div class="tile" id="tile4">
        <img src="images/homeassistant.webp" alt="Home Assistant">
        <div class="detailed-description hidden">
          <p>Placeholder slop: I've always been fascinated with the idea of a "smart home" and smart technology. I stumbled across a Google Home Mini sale for $25 each and decided that four was enough coverage for the majority of my apartment. This setup not only provides my preferred background sounds‚Äîlike instrumental music, smooth jazz, lofi, and natural ambiances such as rain or a fireplace‚Äîbut also gives my laptop a break.</p>
          <p>My experience with Google Home was limited; I had only temporarily used a Google phone and found its UI and settings too rigid, preferring Samsung instead. Nevertheless, my experiments with a Raspberry Pi piqued my interest in potential integrations. This led to discovering pychromecast, which, despite its occasional inconsistencies in queuing YouTube links, fit well with my programming interests and significantly improved my sleep.</p>
          <p>Encouraged by the initial success, I expanded the system's capabilities to include personal daily assistance. Using the schedule tracking from my Automated Schedule project, I set Google Home to wake me up one hour and thirty minutes before my work start time, remind me to go to bed eight hours before, and give a final reminder thirty minutes before bedtime. Additionally, it provides weather updates and bus schedules each morning, tailored to my daily activities.</p>
        </div>
        <p class="project-title">Home Assistant</p>
        <div class="stacks">
          <img src="images/logos/raspberrypi.webp" alt="üèÆ"> Raspberry Pi<br>
          <img src="images/logos/python.webp" alt="üêç"> Python
        </div>
      </div>
	  <div class="tile" id="tile5">
        <img src="images/lookup.webp" alt="Customer Search Interface">
        <p class="project-title">Customer Search Interface</p>
        <div class="stacks">
          <img src="images/logos/sqlite.webp" alt="üíæ"/> SQLite<br>
          <img src="images/logos/python.webp" alt="üêç"> Python
        </div>
      </div>
      <div class="tile" id="tile6">
        <img src="images/server.webp" alt="Server">
        <div class="detailed-description hidden">
          <p>Placeholder slop: I've always been interested in creating a dedicated server that could remain operational around the clock‚Äîhosting FTP, video game servers, bots, movies, and more. While browsing pcpartpicker, I came across an intriguing "incognito" or "sleeper" build, reminiscent of a sleeper car but using an old radio instead of an old beige tower. I bookmarked this innovative idea for future inspiration.</p>
          <p>A few months later, while ordering a replacement motherboard for a friend‚Äôs laptop, I received the wrong item: a micro ATX motherboard, unexpectedly perfect for my first home server. It boasted RAID support, onboard graphics, and compatibility with older chipsets. This mistake kicked off my search for an old radio or similar enclosure to house the server. Despite visits to places like Value Village and Goodwill, I found nothing suitable until an accidental discovery at my cousin's house. I found their old Bell satellite receiver/HD PVR box while searching for an ethernet cable. The measurements were perfect, the condition was impeccable‚Äîit was an ideal match.</p>
          <p>I built the server inside the Bell box, running it 24/7 for several years now on Windows 10. It hosts a Minecraft server, multiple Discord bots, and continuously streams VLC TV shows for background noise. The performance of the integrated graphics still surprises me given their workload. For assembly, I used three standoffs to mount the motherboard safely and secured everything else with velcro strips‚Äîthe SSD is attached to the inside top of the case. I added a 3D printed LED holder to the front panel for power and load indicators, and integrated a toggle switch behind the original power button for aesthetic consistency.</p>
          <p>Originally, the only modifications were holes in the bottom and back for the power supply fan and motherboard I/O. Later, I added a hole on the top for a small CPU fan and another in the front panel for a programmable LCD display that shows CPU and RAM usage. It‚Äôs almost miraculous how well everything fits together, with just 2mm of clearance above the CPU fan and standoffs.</p>
        </div>
        <p class="project-title">Home Server</p>
        <div class="stacks">
          <img src="images/logos/pcpartpicker.webp" alt="üõ†Ô∏è"/> PCPartPicker<br>
          <img src="images/logos/wireguard.webp" alt="WireGuard"/> WireGuard
        </div>
      </div>
      <div class="tile" id="tile7">
        <img src="images/gamejams.webp" alt="Game Jams">
        <p class="project-title">Game Jams</p>
        <div class="stacks">
          <img src="images/logos/unity.webp" alt="üéÆ"> Unity<br>
          <img src="images/logos/blender.webp" alt="üé®"> Blender<br>
          <img src="images/logos/csharp.webp" alt="üá®‚úÇÔ∏è"> C#
        </div>
      </div>
      <div class="tile" id="tile8">
        <img src="images/workstations.webp" alt="Workstations">
        <p class="project-title">Workstations</p>
        <div class="stacks">
          <img src="images/logos/pcpartpicker.webp" alt="üõ†Ô∏è"/> PCPartPicker<br>
        </div>
      </div>
	  <div class="tile" id="tile9">
        <img src="https://pbs.twimg.com/profile_images/949787136030539782/LnRrYf6e.jpg" alt="Modern Rustic Coffee Table">
        <div class="detailed-description hidden">
        </div>
        <p class="project-title">Modern Rustic Coffee Table</p>
      </div>
	  <div class="tile" id="tile10">
        <img src="https://pbs.twimg.com/profile_images/949787136030539782/LnRrYf6e.jpg" alt="This Website">
        <p class="project-title">This Website</p>
        <div class="stacks">
          <img src="images/logos/html5.webp" alt="HTML"> HTML<br>
          <img src="images/logos/css.webp" alt="CSS"> CSS<br>
          <img src="images/logos/javascript.webp" alt="üáØüá∏"> JavaScript
        </div>
      </div>
	  <div class="tile" id="tile10">
        <img src="https://pbs.twimg.com/profile_images/949787136030539782/LnRrYf6e.jpg" alt="# whoami">
        <p class="project-title"># whoami</p>
      </div>
      <!-- Add more tiles here -->
    </section>
    <section class="game-jams-tiles hidden">
    <div class="tile" id="game1">
        <img src="https://static.jam.host/content/eae/9/z/36e9a.png.480x384.fit.jpg" alt="ludum factorum">
        <p class="project-title">ludum factorum</p>
    </div>
    <div class="tile" id="game2">
        <img src="https://static.jam.host/content/d6f/41/z/3f80f.png.480x384.fit.jpg" alt="The Void">
      <p class="project-title">The Void</p>
    </div>
    <div class="tile" id="game3">
        <img src="https://static.jam.host/content/d6f/41/z/46029.png.480x384.fit.jpg" alt="Pillars of Stability">
        <p class="project-title">Pillars of Stability</p>
    </div>
    <div class="tile" id="game4">
        <img src="https://static.jam.host/content/eae/9/z/4d5e1.png.480x384.fit.jpg" alt="Shades of Deception">
      <p class="project-title">Shades of Deception</p>
    </div>
    <div class="tile" id="game5">
        <img src="https://static.jam.host/content/07e/33/z/51601.png.480x384.fit.jpg" alt="Bear's Home Repairs">
        <p class="project-title">Bear's Home Repairs</p>
    </div>
    <div class="tile" id="game6">
        <img src="https://static.jam.host/content/eae/9/z/561b2.png.480x384.fit.jpg" alt="Harvest 31">
        <p class="project-title">Harvest 31</p>
    </div>
    <div class="tile" id="game7">
        <img src="https://static.jam.host/content/07e/33/z/5b0fd.png.480x384.fit.jpg" alt="The Time I was Reincarnated as a Delivery Driver in a Video Game and had to ...">
        <p class="project-title">The Time I was Reincarnated as a Delivery Driver in a Video Game and had to ...</p>
    </div>
    </section>
    <button id="reset-btn" onclick="resetImg()" style="display: none; position: fixed; z-index: 5001; top: 10px; right: 10px;">BACK</button>
  </main>
  <script src="script.js"></script>
</body>
</html>
